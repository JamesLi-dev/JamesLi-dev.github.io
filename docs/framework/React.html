<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-framework/React/React">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">React | 这里是 Torli&#x27;s </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://JamesLi-dev.github.io/docs/framework/React"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="cooking, blog"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="React | 这里是 Torli&#x27;s "><meta data-rh="true" name="description" content="关于 React 相关知识点总结, 持续更新中……"><meta data-rh="true" property="og:description" content="关于 React 相关知识点总结, 持续更新中……"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://JamesLi-dev.github.io/docs/framework/React"><link data-rh="true" rel="alternate" href="https://JamesLi-dev.github.io/docs/framework/React" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://JamesLi-dev.github.io/en/docs/framework/React" hreflang="en"><link data-rh="true" rel="alternate" href="https://JamesLi-dev.github.io/docs/framework/React" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="这里是 Torli&#39;s  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="这里是 Torli&#39;s  Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e0bfd1d1.css">
<link rel="preload" href="/assets/js/runtime~main.32be4096.js" as="script">
<link rel="preload" href="/assets/js/main.1a08660e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_dYNx" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_HwYA"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo2.png" alt="My Site Logo" class="themedImage_rLhL themedImage--light_CjtC"><img src="/img/logo2.png" alt="My Site Logo" class="themedImage_rLhL themedImage--dark_quyK"></div><b class="navbar__title text--truncate">Torli&#x27;s Blog</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/intro">总结</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/category/基础">基础</a></li><li><a class="dropdown__link" href="/docs/category/框架">框架</a></li><li><a class="dropdown__link" href="/docs/category/打包编译检测">打包编译检测</a></li><li><a class="dropdown__link" href="/docs/category/nodejs">NodeJS</a></li><li><a class="dropdown__link" href="/docs/category/数据库">数据库</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">日常 Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/plugin">插件拓展</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/plugin/pnpm">pnpm</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/software">工具软件</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/software/lazygit">LazyGit</a></li></ul></div><a href="https://github.com/JamesLi-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_uxSF colorModeToggle_S3Zp"><button class="clean-btn toggleButton_VmvJ toggleButtonDisabled_FOd7" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_LA5r"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_LEBj"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ldyj"><div class="navbar__search searchBarContainer_KjtY"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RAZQ searchBarLoadingRing_spnr"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_r3lI"><kbd class="searchHint_E9W4">ctrl</kbd><kbd class="searchHint_E9W4">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MxCR docsWrapper_h_X8"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_Kzpt" type="button"></button><div class="docPage_GWs5"><aside class="theme-doc-sidebar-container docSidebarContainer_ldoy"><div class="sidebarViewport_TwFD"><div class="sidebar_H_01 sidebarWithHideableNavbar_Ezn7"><a tabindex="-1" class="sidebarLogo_NiAm" href="/"><img src="/img/logo2.png" alt="My Site Logo" class="themedImage_rLhL themedImage--light_CjtC"><img src="/img/logo2.png" alt="My Site Logo" class="themedImage_rLhL themedImage--dark_quyK"><b>Torli&#x27;s Blog</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_J18w"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/基础">基础</a><button aria-label="打开/收起侧边栏菜单「基础」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/框架">框架</a><button aria-label="打开/收起侧边栏菜单「框架」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/react">React</a><button aria-label="打开/收起侧边栏菜单「React」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/framework/React">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/React/Hooks">Hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/React/Router">Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/React/Redux">Redux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/React/Next">Next</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/vue">Vue</a><button aria-label="打开/收起侧边栏菜单「Vue」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/Next">Next</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/Umi">Umi</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/UniApp">UniApp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/miniprogram">小程序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/framework/other">其他</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/打包编译检测">打包编译检测</a><button aria-label="打开/收起侧边栏菜单「打包编译检测」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/nodejs">NodeJS</a><button aria-label="打开/收起侧边栏菜单「NodeJS」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/数据库">数据库</a><button aria-label="打开/收起侧边栏菜单「数据库」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/plugin">插件拓展</a><button aria-label="打开/收起侧边栏菜单「插件拓展」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/软件">软件</a><button aria-label="打开/收起侧边栏菜单「软件」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_p9pI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_uk2b"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_baW4"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Njrt"><div class="docItemContainer_ZzVP"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HWXL" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_IT7R"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/框架"><span itemprop="name">框架</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/react"><span itemprop="name">React</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">React</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_GIgr theme-doc-toc-mobile tocMobile_JEhh"><button type="button" class="clean-btn tocCollapsibleButton_Q9up">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>React</h1><blockquote><p>关于 React 相关知识点总结, 持续更新中……</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="fiber">Fiber<a href="#fiber" class="hash-link" aria-label="Fiber的直接链接" title="Fiber的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="fiber-1">Fiber<a href="#fiber-1" class="hash-link" aria-label="Fiber的直接链接" title="Fiber的直接链接">​</a></h3><p>它主要解决了 React 在处理大型应用和复杂更新场景时的性能问题。Fiber 的目标是提高 React 在渲染和更新组件时的性能，并支持更高效的任务调度。
Fiber 是一种架构，让render 阶段可以调度任务的优先级
也是一种数据结构，通过两颗缓存树 <code>current Fiber</code> 和 <code>workInProgress Filber</code> ，一个用于展示，一个用于操作，当一轮操作完成后，react 才会切换到操作完成的Fiber 节点上，另一棵树会销毁重新构建用于操作。 每个节点进行对比是会进行一次 <code>shouldYield()</code> 判断，利用空闲时间去更新。
高优先级任务使用 <code>RequestAnimatonFrame，</code> 低优先级使用 <code>RequestIdleCallback</code></p><p>从某种意义上来说 fiber 就是 vdom，但是 fiber != vdom
这里所谓的调度就是，调度器允许给任务分配不同的优先级，高优先级限制性，</p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="diff算法">diff算法<a href="#diff算法" class="hash-link" aria-label="diff算法的直接链接" title="diff算法的直接链接">​</a></h3><ul><li>用JS对象模拟DOM（虚拟DOM）</li><li>把此虚拟DOM转成真实DOM并插入页面中（render）</li><li>如果有事件发生修改了虚拟DOM，比较两棵虚拟DOM树的差异，得到差异对象（diff）</li><li>把差异对象应用到真正的DOM树上（patch）
</li></ul><p>diff 的大致流程：</p><blockquote><p>react 检测到组件状态或属性发生改变，会出发重新渲染，从而生成新的vdom树，
然后diff算法对新旧vdom 树进行深度优先遍历，比较节点的类型属性以及存在的key，
如果节点发生变化，会销毁旧的节点，及其子节点，重新生成新的节点，属性则会保留节点，只更新属性，
最后react 根据计算结果得到的更新之后的vdom 更新在真是dom，保持一致。
主要作用是减少直接操作dom 导致的重排重绘，减少开销，提高效率</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="虚拟dom">虚拟dom<a href="#虚拟dom" class="hash-link" aria-label="虚拟dom的直接链接" title="虚拟dom的直接链接">​</a></h3><p>  就是 js和dom之间的一种映射吧，可以展现dom的结构还有属性，主要作用是在记录差异，最后把差异更新到真正的dom中</p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="react-中-key-作用">React 中 key 作用<a href="#react-中-key-作用" class="hash-link" aria-label="React 中 key 作用的直接链接" title="React 中 key 作用的直接链接">​</a></h3><p>  key 是给每一个 vnode 的唯一 id,可以依靠 key,更准确,更快的拿到 oldVnode 中对应的 vnode 节点</p><p>  循环中不建议使用index，当我们在操作更新数据的时候，会导致所有的dom 重新渲染，效率低下，还有就是有可能导致更新不符合预期
每次都是用不一样的key，比如时间戳或者随机数等等，会造成每次key不一样，导致许多组件实例和DOM节点被不必要地重新创建，这可能导致性能下降和子组件中的丢失状态</p><h2 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="事件处理系统">事件处理系统<a href="#事件处理系统" class="hash-link" aria-label="事件处理系统的直接链接" title="事件处理系统的直接链接">​</a></h2><p>  React 的事件系统（Event System）是一种统一的事件处理机制，它允许开发者在 React 应用中处理原生浏览器事件，如点击、输入、滚动等。React 事件系统的主要目标是提供一种跨浏览器的、一致的事件处理方式，并实现性能优化。</p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="react-事件系统的实现主要包括以下几个方面">React 事件系统的实现主要包括以下几个方面：<a href="#react-事件系统的实现主要包括以下几个方面" class="hash-link" aria-label="React 事件系统的实现主要包括以下几个方面：的直接链接" title="React 事件系统的实现主要包括以下几个方面：的直接链接">​</a></h3><ul><li><p><strong>合成事件（Synthetic Events）</strong>：React 将原生浏览器事件包装为合成事件对象，这些合成事件具有与原生事件相似的接口，但提供了跨浏览器的一致性。这意味着无论在哪个浏览器中运行，React 的事件处理行为都是相同的。</p></li><li><p><strong>事件委托（Event Delegation）</strong>：React 事件系统采用事件委托的方式处理事件。这意味着 React 并不是将事件监听器绑定到每个实际的 DOM 节点上，而是将事件监听器绑定到组件树的根节点（通常是 document）。当事件触发时，React 利用事件冒泡机制捕获事件，然后根据事件目标和事件类型确定需要触发的事件处理函数。这种方式可以减少事件监听器的数量，降低内存占用，提高性能。</p></li><li><p><strong>事件池（Event Pooling）</strong>：为了降低内存占用，React 使用事件池来重用合成事件对象。在事件处理函数执行完毕后，React 会将合成事件对象的属性清空，并将其放回事件池，以便后续的事件处理重用。这有助于减少垃圾回收的开销，提高性能。</p></li><li><p><strong>自动绑定（Autobinding）</strong>：在类组件中，React 会自动绑定事件处理函数到组件实例。这意味着在事件处理函数中，开发者可以通过 this 关键字访问组件实例。这种自动绑定便于开发者在事件处理函数中访问组件状态和属性。在函数组件中，可以使用 React Hooks（如 useState 和 useEffect）来处理组件状态和副作用。</p></li></ul><p>总之，React 事件系统通过合成事件、事件委托、事件池和自动绑定等技术实现了一种跨浏览器、高性能的事件处理机制。这使得 React 开发者能够更轻松地处理浏览器事件，同时保持应用性能。</p><h2 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="生命周期">生命周期<a href="#生命周期" class="hash-link" aria-label="生命周期的直接链接" title="生命周期的直接链接">​</a></h2><p>直接上图，新旧对比</p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="旧版">旧版<a href="#旧版" class="hash-link" aria-label="旧版的直接链接" title="旧版的直接链接">​</a></h3><p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e12b2e35c8444f19b795b27e38f4c149~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" class="img_Ne1E"></p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="新版本">新版本<a href="#新版本" class="hash-link" aria-label="新版本的直接链接" title="新版本的直接链接">​</a></h3><p><img loading="lazy" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7d8676f379d4d96bbf0ebd9a8528594~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" class="img_Ne1E"></p><p>下面就不介绍旧版本了，相信现在很少人会使用旧版本了</p><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="168-以后生命周期">16.8 以后生命周期<a href="#168-以后生命周期" class="hash-link" aria-label="16.8 以后生命周期的直接链接" title="16.8 以后生命周期的直接链接">​</a></h3><ul><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="constructor">constructor<a href="#constructor" class="hash-link" aria-label="constructor的直接链接" title="constructor的直接链接">​</a></h4><code>constructor()</code> 是在React组件挂载之前被调用，在为React.Component子类实现构造函数时，应在其他语句之前调用 <code>super()</code> (将父类的this对象继承给子类)。</li></ul><p>通常，React构造函数仅用于以下两种情况：</p><ul><li><p>来初始化函数内部 state</p></li><li><p>为 事件处理函数 绑定实例</p></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="getderivedstatefromprops">getDerivedStateFromProps<a href="#getderivedstatefromprops" class="hash-link" aria-label="getDerivedStateFromProps的直接链接" title="getDerivedStateFromProps的直接链接">​</a></h4><p><code>getDerivedStateFromProps()</code> 在调用 render方法之前调用，在初始化和后续更新都会被调用</p><blockquote><p>返回值：返回一个对象来更新 state, 如果返回 null 则不更新任何内容</p></blockquote><blockquote><p>参数： 第一个参数为即将更新的 props, 第二个参数为上一个状态的 state , 可以比较props 和 state来加一些限制条件，防止无用的state更新</p></blockquote><blockquote><p>注意：getDerivedStateFromProps 是一个静态函数，不能使用this, 也就是只能作一些无副作用的操作</p></blockquote></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="render">render<a href="#render" class="hash-link" aria-label="render的直接链接" title="render的直接链接">​</a></h4><p><code>render()</code> 方法是class组件中唯一必须实现的方法，用于渲染dom, <code>render()</code>方法必须返回reactDOM</p></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="componentdidmount">componentDidMount<a href="#componentdidmount" class="hash-link" aria-label="componentDidMount的直接链接" title="componentDidMount的直接链接">​</a></h4><p><code>componentDidMount()</code> 在组件挂载后 (插入DOM树后) 立即调用，<code>componentDidMount()</code> 是发送网络请求、启用事件监听方法的好时机，并且可以在 此钩子函数里直接调用 <code>setState()</code></p></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="shouldcomponentupdate">shouldComponentUpdate<a href="#shouldcomponentupdate" class="hash-link" aria-label="shouldComponentUpdate的直接链接" title="shouldComponentUpdate的直接链接">​</a></h4><p><code>shouldComponentUpdate()</code> 在组件更新之前调用，可以控制组件是否进行更新， 返回true时组件更新， 返回false则不更新，
包含两个参数，</p><ul><li><p>第一个是即将更新的 props 值，</p></li><li><p>第二个是即将跟新后的 state 值，
可以根据更新前后的 props 或 state 来比较加一些限制条件，决定是否更新，进行性能优化</p><blockquote><p>可以使用内置 PureComponent 组件替代</p></blockquote><blockquote><p>不要 shouldComponentUpdate 中调用 setState()，否则会导致无限循环调用更新、渲染，直至浏览器内存崩溃</p></blockquote></li></ul></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="getsnapshotbeforeupdate">getSnapshotBeforeUpdate<a href="#getsnapshotbeforeupdate" class="hash-link" aria-label="getSnapshotBeforeUpdate的直接链接" title="getSnapshotBeforeUpdate的直接链接">​</a></h4><p><code>getSnapshotBeforeUpdate()</code> 在最近一次的渲染输出被提交之前调用。也就是说，在 render 之后，即将对组件进行挂载时调用。</p><blockquote><p>它可以使组件在 DOM 真正更新之前捕获一些信息（例如滚动位置），此生命周期返回的任何值都会作为参数传递给 componentDidUpdate()。如不需要传递任何值，那么请返回 null</p></blockquote></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="componentdidupdate">componentDidUpdate<a href="#componentdidupdate" class="hash-link" aria-label="componentDidUpdate的直接链接" title="componentDidUpdate的直接链接">​</a></h4><p><code>componentDidUpdate()</code> 会在更新后会被立即调用。首次渲染不会执行，包含三个参数，第一个是上一次props值。 第二个是上一次state值。如果组件实现了 <code>getSnapshotBeforeUpdate()</code> 生命周期（不常用），第三个是“snapshot” 参数传递。</p><blockquote><p>可以进行前后props的比较进行条件语句的限制，来进行 setState() , 否则会导致死循环</p></blockquote></li><li><h4 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="componentwillunmount">componentWillUnmount<a href="#componentwillunmount" class="hash-link" aria-label="componentWillUnmount的直接链接" title="componentWillUnmount的直接链接">​</a></h4><p><code>componentWillUnmount()</code> 在组件即将被卸载或销毁时进行调用。此生命周期是取消网络请求、移除监听事件、清理 DOM 元素、清理定时器等操作的好时机。</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_kuKB" id="执行顺序">执行顺序<a href="#执行顺序" class="hash-link" aria-label="执行顺序的直接链接" title="执行顺序的直接链接">​</a></h3><ul><li><p><strong>创建时</strong></p><ul><li>constructor()</li><li>static getDerivedStateFromProps()</li><li>render()</li><li>componentDidMount()</li></ul></li><li><p><strong>更新时</strong></p><ul><li>static getDerivedStateFromProps()</li><li>shouldComponentUpdate()</li><li>render()</li><li>getSnapshotBeforeUpdate()</li><li>componentDidUpdate()</li></ul></li><li><p><strong>卸载时</strong></p><ul><li>componentWillUnmount()</li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/react"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">React</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/framework/React/Hooks"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Hooks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_a4zv thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fiber" class="table-of-contents__link toc-highlight">Fiber</a><ul><li><a href="#fiber-1" class="table-of-contents__link toc-highlight">Fiber</a></li><li><a href="#diff算法" class="table-of-contents__link toc-highlight">diff算法</a></li><li><a href="#虚拟dom" class="table-of-contents__link toc-highlight">虚拟dom</a></li><li><a href="#react-中-key-作用" class="table-of-contents__link toc-highlight">React 中 key 作用</a></li></ul></li><li><a href="#事件处理系统" class="table-of-contents__link toc-highlight">事件处理系统</a><ul><li><a href="#react-事件系统的实现主要包括以下几个方面" class="table-of-contents__link toc-highlight">React 事件系统的实现主要包括以下几个方面：</a></li></ul></li><li><a href="#生命周期" class="table-of-contents__link toc-highlight">生命周期</a><ul><li><a href="#旧版" class="table-of-contents__link toc-highlight">旧版</a></li><li><a href="#新版本" class="table-of-contents__link toc-highlight">新版本</a></li><li><a href="#168-以后生命周期" class="table-of-contents__link toc-highlight">16.8 以后生命周期</a></li><li><a href="#执行顺序" class="table-of-contents__link toc-highlight">执行顺序</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">归档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">总结</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">日常 Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/plugin">插件拓展</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/software">工具软件</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/JamesLi-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Torli, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.32be4096.js"></script>
<script src="/assets/js/main.1a08660e.js"></script>
</body>
</html>